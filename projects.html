<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projetos | Igor Garcia</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-overlay"></div>
    
    <header>
        <nav>
            <div class="logo">IG<span>.</span>devsecops</div>
            <ul>
                <li><a href="index.html">/home</a></li>
                <li><a href="projects.html">/projetos</a></li>
                <li><a href="index.html#contact">/contato</a></li>
            </ul>
        </nav>
    </header>

    <main class="container" style="margin-top: 8rem;">
        <h2 class="section-title">Repositórios Públicos</h2>
        <div id="github-projects-container" class="skills-grid">
            <div class="line" style="grid-column: 1/-1;">
                <span class="prompt">igor@devsecops:~$</span> <span class="command">fetch --repos</span>
            </div>
            <div class="response" style="grid-column: 1/-1;">Iniciando conexão com a API do GitHub...</div>
        </div>
    </main>

    <footer>
        <p>&copy; <span id="year"></span> Igor Garcia. <span class="highlight">Status: Operacional</span></p>
    </footer>

    <script src="main.js"></script>
    <script>
        async function fetchGitHubRepos() {
            const container = document.getElementById('github-projects-container');
            try {
                const response = await fetch('https://api.github.com/users/gsousaigor/repos?sort=updated&per_page=100');
                const repos = await response.json();
                
                // Limpar apenas a mensagem de carregamento, mantendo o comando visual
                container.innerHTML = `
                    <div class="line" style="grid-column: 1/-1;">
                        <span class="prompt">igor@devsecops:~$</span> <span class="command">fetch --repos</span>
                    </div>
                `;

                repos
                    .filter(repo => !repo.fork && repo.name !== 'gsousaigor')
                    .forEach(repo => {
                        const card = document.createElement('article');
                        card.className = 'skill-card';
                        
                        const techTag = repo.language ? `<span class="tech-tag">${repo.language}</span>` : '';
                        
                        card.innerHTML = `
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <h3 style="margin:0">${repo.name}</h3>
                                ${techTag}
                            </div>
                            <p style="font-size: 0.9rem; margin-bottom: 1.5rem; color: #888;">${repo.description || 'Sem descrição.'}</p>
                            <a href="${repo.html_url}" target="_blank" class="project-link">VIEW_CODE_➔</a>
                        `;
                        container.appendChild(card);
                    });
            } catch (error) {
                console.error(error);
            }
        }
        fetchGitHubRepos();
    </script>
</body>
</html>
